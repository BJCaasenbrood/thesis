\section{Related works}
\label{sec:C5:related_works}
Over the past two decades, significant advancements have been made in the field of soft robotics. To support the growing community, researchers in the field have made efforts to provide open-source software tools alongside their scientific contributions. This section provides a review of related work on open-source software packages for soft robotics, comparing these software packages and discussing how \sorotoki addresses any gaps in functionality.

One widely used tool is the \texttt{SOFA} (Stand Alone Open Framework for Animation) software \cite{Duriez2013}, which is an open-source framework for real-time physically-based simulations of mechanical systems. Relevant to soft robotics, \texttt{SOFA} is commonly used to simulate the behavior of soft robots and to design and test control algorithms on real platforms \cite{Duriez2013, Coevoet2017}. SOFA employs the Finite Element Method (FEM) to describe the continuum deformations of inertial elastic bodies. FEM is a numerical technique that solves partial differential equations (PDEs) that describe physical systems by dividing the domain of the system into small elements and approximating the PDEs with a set of algebraic equations \cite{Kim2018,Holzapfel2002}. FEM models generally provide high-accuracy volumetric deformation simulations of soft materials, but their high state dimension, which can often be in the thousands or millions of degrees of freedom, can render them computationally expensive for state feedback. To enhance efficiency, Goury et al. \cite{Goury2018} have explored model reduction using snapshot Proper Orthogonal Decomposition (POD).

Snapshot POD \cite{Benner2014,Astrid2008} is a method for significantly reducing the dimensionality of a model by collecting snapshots of its state and utilizing Singular Value Decomposition (SVD) to identify the principal components. The projection is achieved by taking a linear combination of the principal components, weighted by their corresponding coefficients (also known as "modes"). The resulting projection is then a reduced-order model of the original system, which can be used for faster simulation. In addition to improving speed, this approach also provides accurate, robust, and efficient models suitable for closed-loop controller design \cite{Thieffry2019,Wu2021Feb,Alora2022,Tonkens2021May}. The numerical FEM model in \texttt{SOFA} incorporates both the structural geometry and material properties, facilitating the transfer of control policies to physical systems. This has enabled successful control synthesis using \texttt{SOFA} in various experimental settings \cite{Wu2021Feb, Katzschmann2019Apr}. \texttt{SOFA} also includes tools for real-time visualization and data analysis, making it a valuable platform for testing and debugging control algorithms. Recently, Schegg et al. \cite{Schegg2022} introduced an interface between \texttt{SOFA} and \texttt{OpenAI} called \texttt{SofaGym}. This wrapper enables the training of reinforcement learning (RL) policies using real-time simulation models, and it incorporates model reduction to further improve the efficiency of RL that otherwise suffer from computationally-intensive simulations.

Another software package that utilizes the nonlinear finite element approach similar to \textit{SOFA} is the \texttt{Gibbon} toolbox, developed by Moerman et al. \cite{Moerman2018}. \texttt{Gibbon} is a MATLAB-based pre-processor and post-processor for \texttt{FEBio} \cite{Maas2012}. The toolkit has recently been used to solve the nonlinear deformation of bending soft pneumatic actuators using finite shell elements \cite{Smith2022_FEM}, generate designs using a multi-objective heuristic \cite{Smith2022}, and analyze soft bending actuators composed of an adaptive fiber-elastomer composite \cite{Kamble2022Jan}. It also features various tools for image segmentation, meshing, and visualization, with a focus on biomedical engineering.

Despite the availability of open-source FEM packages for modeling and controlling soft robots, challenges still exist in using FEM for design-based optimization of these systems, particularly due to the complexity of hyper-elastic materials and fluidic actuation, which are crucial in the field of soft robotics. Currently, there are limited options for frameworks that effectively and efficiently address these issues, although recent developments are promising. Smith et al. \cite{Smith2023Feb} recently proposed a versatile free-form design and fabrication workflow called \texttt{SoroForge}, which builds upon \cite{Smith2022_FEM,Smith2022}. Unlike volumetric representation, their approach can design complex soft actuator exteriors using a highly-flexible and fast node-tree interface of implicit function primitives. However, these generative CAD solutions are limited to only addressing quasi-static deformations and do not consider the deformation induced by control.

There are several software packages specifically designed for the dynamic locomotion of soft robots, which take into account the structural design, actuator placement within the soft body, control actions, and even adapt the body's topology accordingly. One such example is \texttt{EvoSoro} developed by Kriegman et al. \cite{Kriegman2020}, which builds on the work of Hiller et al. \cite{Hiller2014} and Cheney et al. \cite{Cheney2013}. This study discretizes a soft continuum body into small voxels, which can be assigned different cell types: soft or hard passive cells, or two different muscle cell types that undergo periodic contraction with an $+\pi$ phase offset. The dynamic behavior of the system is modeled through a network of mass particles and springs, and a Compositional Pattern-Producing Network (CPPN) is utilized to determine the optimal combination of material type and placement within a specified domain, enabling locomotion. This concurrent optimization of topology and control policy, referred to as \emph{"co-design"}, is a subject of active research within the field of soft robotics \cite{Xavier2022Jun}. Another example of co-design in soft robotics is \texttt{EvoGym} \cite{Bhatia2022}, which optimizes for a wide range of tasks such as locomotion and object manipulation (e.g., carrying and throwing). More recently, \texttt{DiffTachi} (the successor to \texttt{QueenChain} \cite{Hu2019May}) is a differential programming environment that allows users to directly provide gradient-based information into a neural network controller using a least-squares Material Point Method (MPM). Unlike FEM, MPM is a mesh-free approach that describes the continuum using a finite number of hybrid Euler-Lagrangian elements referred to as "material points". In terms of learning control policies, \texttt{SoMoGym} by Graule et al. \cite{Graule2022} uses reinforcement learning (RL) to teach locomotion and object manipulation in soft robots, and has successfully bridged the gap between simulation and reality (Sim2Real). It is important to note that \texttt{QueenChain}, \texttt{DiffTachi}, and \texttt{SoMoGym} focus purely on learning control and not design. Simultaneous optimization of (free-form) design and control for soft robots remains an open challenge.

Parallel to volumetric-based FEM or MPM soft robotic software, there also exists a branch of dynamic beam (or rod) models for soft robots. These beam model approaches for soft robots have long been a viable alternative to FEM-based models -- examples include the Piecewise-Constant Curvature (PCC) model \cite{Falkenhahn2015,Stolzle2021,Caasenbrood2022}, the augmented PCC rigid-body model \cite{DellaSantina2020,Trumic2020,Kazemipour2022May}, and various non-constant curvature descriptions \cite{DellaSantina2020,Wang2022Mar,Boyer2021,Renda2020}. As the formulations of these models are often synonymous to rigid robot models, they have a rich basis of control-oriented research \cite{Borja2022Apr,Pustina2022,Caasenbrood2022,Fischer2022}. \texttt{TMTDyn} by Sadati et al. \cite{Sadati2020} is a MATLAB toolkit that automates the derivation of dynamic models for hybrid rigid-continuum body soft robots, based on discretized lumped systems and reduced-order models. More recently, \texttt{SoroSim} was developed by Mathew et al. \cite{Mathew2022}, which is a \texttt{MATLAB} toolbox with a graphical user interface for modeling, analysis, and control of soft, rigid, and hybrid robots. \texttt{SoroSim} is based on the Geometric Variable Strain (GVS) approach applied to the geometric Cosserat beam theory in $\textrm{SE}(3)$, introduced relatively recently by Renda et al. \cite{Renda2020} and Boyer et al. \cite{Boyer2021}. Its Lagrangian formulation also allows for various complex control designs, such as a geometrically-exact inverse kinematic controller that accounts for under-actuation of tendon-based actuation \cite{Mathew2022}. \texttt{SoroSim} has been used for dynamic models of flexible flying rods, hybrid rigid-soft manipulators, design optimization for soft robot swimmers, and inverse dynamic control. The toolbox has also been employed for the simultaneous swimming and grasping dynamics of underwater soft-rigid hybrid robots \cite{Mathew2022Oct}.

Alternatively, \texttt{PyElastica} (a wrapper for \texttt{Elastica} \cite{Naughton2021}) by Tekinalp et al. \cite{Tekinalp2022} is an open-source software package written in \texttt{Python} that provides the capability to simulate an assembly of Cosserat beams. The software is based on the work of Gazzola et al. \cite{Gazzola2018}. Unlike the Geometric Variable Strain (GVS) approach proposed in \cite{Renda2020,Boyer2021,Mathew2022}, \texttt{PyElastica} employs a discrete formulation of the Cosserat partial differential equation (PDE) through a finite number of line elements referred to as Discrete Elastic Rods (DERs). Additionally, its \texttt{c++} architecture enables it to handle problems with higher computational complexity. As demonstrated in \cite{Zhang2019}, \texttt{Elastica} has been used to model snake muscular systems, bird wing flapping, and bio-hybrid robots using soft contractile filaments. Furthermore, \texttt{PyElastica} has been utilized in energy-based control and even extended to model the full muscular-skeletal system of an octopus' tentacle modeled as an array of Cosserat beams \cite{Chang2022}, and mimic biological movements accordingly \cite{Wang2022Dec}. It also provides wrappers for \texttt{OpenAI} to enable reinforcement learning.

\afterpage{
\renewcommand\arraystretch{1.75}
\setlength{\tabcolsep}{2pt}
\begin{sidewaystable*}[!h]
    \caption{Comparison between different open-source software provided by the soft robotics community that are tailored either towards design, modeling, or control of soft robots. $^*$Inverse design here refers to automated algorithms that freely optimize the topology of the soft body. $^\dagger$Sim2Real here implies the software has been used on a real soft robotic platform -- eitehr successfully transferring open or closed-loop control policies to reality; or optimized design solution to real soft systems. \label{tab:sorotoki:software} \vspace{-3mm}}
    %\rowcolors{1}{}{lightgray}
    \fontsize{7.5pt}{10pt}\selectfont
    \centering
    \vspace{2mm}
    \rowcolors{1}{}{blue!5}
    \begin{tabular}[t]{lllcccccccc}
        \hline
        Software                                             & Front-end & Model(s)          & Hyperelastic & Tendon & Fluidic & Locomotion & Manipulation & Inv. Design* & Control & Sim2Real$^\dagger$ \\
        \hline
        \hline
        \textit{SOFA} \cite{Duriez2016,Coevoet2017}          & Python    & (Reduced) FEM   & \cmark       & \cmark & \cmark   & \cmark     & \cmark       & \xmark          & \cmark  & \cmark             \\
        \textit{Gibbon} \cite{Moerman2018}                   & Matlab    & FEM             & \cmark       & \cmark & \cmark   & \xmark     & \xmark       & \cmark          & \xmark  & \xmark             \\
        \textit{SoRoForge}\cite{Smith2023Feb}                & Matlab    & Shell-FEM       & \cmark       & \xmark & \cmark   & \xmark     & \xmark       & \cmark          & \xmark  & \cmark             \\
        \textit{SoftIK}\cite{Bern2021Apr}                    & C++       & FEM             & \cmark       & \cmark & \xmark   & \cmark     & \cmark       & \xmark          & \cmark  & \cmark             \\
        \textit{EvoGym}\cite{Bhatia2022}                  & Python    & Mass-spring     & \xmark       & \xmark & \xmark   & \cmark     & \cmark       & \cmark          & \xmark  & \xmark             \\
        \textit{EvoSoro}\cite{Kriegman2020,Cheney2013} & Python    & Mass-spring     & \xmark       & \xmark & \xmark   & \cmark     & \cmark       & \cmark          & \xmark  & \cmark             \\
        \textit{DiffTachi} \cite{Hu2019May}                  & C++       & MPM             & \xmark       & \xmark & \xmark   & \cmark     & \cmark       & \cmark          & \xmark  & \xmark             \\
        \textit{TMTDyn} \cite{Mathew2022}                    & Matlab    & ROM + EBA       & \xmark       & \cmark & \cmark   & \xmark     & \cmark       & \xmark          & \cmark  & \cmark             \\
        \textit{SoroSim} \cite{Mathew2022}                   & Matlab    & Cosserat        & \xmark       & \cmark & \cmark   & \cmark     & \cmark       & \xmark          & \cmark  & \xmark             \\
        \textit{(Py)Elastica} \cite{Gazzola2018}          & Python    & Cosserat        & \xmark       & \cmark & \xmark   & \cmark     & \cmark       & \xmark          & \cmark  & \xmark             \\
        \textit{SoMoGym} \cite{Graule2022}                                    & Python    & Rigid-link      & \xmark       & \xmark & \cmark   & \cmark     & \cmark       & \xmark          & \cmark  & \cmark             \\
        \textit{Sorotoki} (ours)                             & Matlab    & FEM + Cosserat  & \cmark       & \cmark & \cmark   & \cmark     & \cmark       & \cmark          & \cmark  & \cmark             \\
        \hline
    \end{tabular}
\end{sidewaystable*}
\clearpage
}

To summarize, Table \ref{tab:sorotoki:software} provides an overview of the functionalities of the previously discussed software packages for soft robotics. The table highlights the diversity of software options available, each with specialized solution approaches for specific sub-problems in soft robotics. However, there are limited tools that address the combined issues of design and control in an interdependent, holistic manner. For instance, developing a model-based controller for a specific soft robot heavily relies on its structural geometry, material composition, network of soft actuators, and their dynamic interaction with the soft body. On the other hand, finding a suitable soft robot design requires \textit{a-priori} knowledge of the material properties and their deformation under the admissible control inputs. This complex interplay between design, modeling, and control makes studying and developing soft robots a challenging task. \texttt{Sorotoki} aims to address these challenges by integrating the scientific disciplines of design and control into a unified toolkit.

\section{Getting started with {Sorotoki}}
\label{sec:C5:open_softrobots}
In the following section, we briefly detail a starter's guide for \texttt{Sorotoki}. The software package \texttt{Sorotoki} is available via git:
%
\begin{lstlisting}[style=terminal]
$ git clone https://github.com/BJCaasenbrood/SorotokiCode.git
\end{lstlisting}
%
To install the toolkit, request the documentation, or preview demonstrations of the toolkit, we call 
%
\begin{lstlisting}[style=Matlabterminal]
> sorotoki install      % installation toolkit
> sorotoki doc          % provides documentation
> sorotoki demo         % provides example scripts
\end{lstlisting}
%
in the \textit{Matlab} command prompt, respectively. The online documentation provides information on the features and capabilities, installation instructions, general use and syntaxing. The documentation assists users in comprehending and efficiently navigating it for their research requirements. It serves as a complement to the work presented herein. 
\thumbimageeven{\qrcode[height=1.0cm]{https://bit.ly/3zIvbHt}}{\texttt{Sorotoki}}{0mm}