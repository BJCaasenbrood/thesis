\section{Introduction}
\label{sec:introduction}
Since the late 1980s, roboticists have been developing fluid-driven robots inspired by biological systems. Examples include the pneumatic three-link soft robot manipulator developed by Wilson et al. \cite{Wilson1989Jun,Weisburd1988,Wilson2007} and the fluidic four-fingered soft gripper presented by Suzumori et al. \cite{Suzumori1991,Suzumori1992}, which both showing high dexterity for advanced object manipulation without the need for advanced (contact-aware) controllers. Although the design and control of these robots were simple, their level of dexterity and adaptability was previously unseen in rigid robotics and strongly resembled biological systems. These benefits were achieved through the use of "\textit{soft materials}" paired with fluidic actuation, where "\textit{soft}" refers to the collective mechanical properties of highly compliant materials such as flexibility, compressibility, and mechanical robustness. Just as nature exhibits diverse evolutionary solutions to environmental locomotion and manipulation, soft materials possess a plethora of beneficial mechanical properties that can be applied to robotics. Today, the philosophy of building robots from soft materials has significantly matured and has become a well-recognized field known as "\textit{soft robotics}".

Due to their mechanical composition, soft robots offer several potential advantages compared to traditional rigid robots \cite{Rus2015}. First, these robotic systems are less likely to cause injury during collisions, making them a more suitable alternative for tasks involving close human-robot interaction. Secondly, soft robots possess the ability to adapt to unstructured environments and manipulate a diverse array of objects through their ability to change shape and conform adaptively to their surroundings \cite{Hughes2016Nov,Marchese2015}. These features are somewhat analogous to those found in nature, such as the trunk of an elephant grasping tree branches or the tentacles of an octopus squeezing through narrow spaces. Soft materials can be tuned to allow for delicate grasping \cite{Sinatra2019Aug,Galloway2016} or high-power densities \cite{Li2017Dec}. Additionally, their high adaptability paired with tunable low compliance make them extremely robust towards abrupt impacts or high compression forces \cite{Bartlett2015Jul}, making them suitable for various tasks in harsh environments without breaking \cite{Hawkes2017,Li2021Mar,Tolley2014Sep}. Moreover, soft robots are typically constructed from low-cost materials and fabricated through straightforward manufacturing processes, such as rubber casting, making them more cost-effective compared to traditional rigid robots. With recent advances in soft material Additive Manufacturing (AM), soft robots can even be fully 3D-printed \cite{Wallin2018Jun,Xavier2022Jun}. This not only reduces production time and cost, but also allows for the embedding of printed on-board logic \cite{Hubbard2021,Wehner2016}. Additionally, soft robots tend to be lightweight, making them easier to handle and transport, making them ideal for wearable robotics.

\subsection{Problem formulation}
Although significant progress has been made since their inception, generalized solutions for the design and control of soft robots are still lacking in comparison to those available for rigid robots. This can be partially attributed to the inherently nonlinear and high-dimensional nature of the mathematical descriptions for deformable robotic bodies composed of soft materials. This presents major challenges in finding suitable models that enable fast simulation, which ultimately hinders efficient structural design and model-based controller design. Despite the numerous challenges in soft robotics, two major research trends can be recognized within the soft robotics community:

\textbf{A: Design of soft actuators and sensors.} A majority of the soft robots are actuated in two ways \cite{Rus2015}: $(i)$ local actuation through variable length tendons (e.g., cables \cite{Renda2018} or shape-memory alloy wires \cite{An2023Jan}) or $(ii)$ distributed actuation through responsive soft materials \cite{Vantomme2021} or surface loads using fluidics \cite{Fras2018Oct,Hawkes2017,Falkenhahn2015}, commonly implemented as fluidic networks embedded within the soft body. The latter method is often referred to as Fluidic Elastomer Actuators (FEAs) or Soft Fluidic Actuators (SFA). FEAs can be designed through either geometric asymmetries in their structural design or by incorporating a composition of different materials, such as fibers or meshes, that induce the desired deformation when pressurized. While FEA designs date back to the 1980s, there remain significant gaps in understanding and applying established engineering principles to their design. FEAs frequently experience large deformation when actuated, leading to slow actuation due to material relaxation or, in more severe cases, fatigue or tearing caused by ballooning \cite{Marchese2015} -- almost inherent to the elastomeric material effects of FEAs. Furthermore, low-compliance soft elastomer actuators often undergo parasitic deformation when exposed to external forces, like gravitational load. To efficiently solve the design cycle in soft actuators, it is essential to have a comprehensive understanding of the nonlinear deformation characteristics of soft materials under static and dynamic conditions.

On the contrary, proprioceptive soft sensing technology is still in early stages. The high compliance of soft robots often makes it difficult to apply common embedded sensors, such as encoders, capacitive sensors, strain gauges, and inertial sensors. These sensors are well-suited for rigid robots with articulated joints, as they are effective in measuring local joint displacement. However, in soft robots, displacement is often distributed, rendering these sensors less suitable. Furthermore, these sensors must be designed to minimize their impact on mechanical impedance, in order to minimize changes to the structural dynamics and operational workspace. A common approach is to incorporate microfluidic channels filled with a conductive liquids \cite{Tapia2020,Teng2018,Park2012}, such as Eutectic Gallium-Indium (EGaIn), into the soft body, that are placed antagonistic to the soft actuator. Upon deformation, the resistance changes, allowing for the correlation of specific deformation profiles with the soft robot. Other solutions incorporate integrated Hall sensors to measure changes in the magnetic field of ferromagnets distributed throughout the body \cite{Baaij2023,Skorina2017Jan}, or utilize fiber-optic grating bending sensors \cite{Galloway2019}. Generally speaking, the relationship between sensor output and deformation is non-trivial and often requires the extensive acquisition of \textit{a-priori} measurement data (sometimes synthetic) to be mapped onto a set of motion primitives.

The geometry of soft actuators and sensors plays a crucial role in determining their functionality and performance. Currently, most soft robotic components are designed using Computer-Aided Design (CAD) software similar to those used for rigid robots. However, as the geometric complexity of soft robots increases, particularly with the increasing trend towards bio-inspired and 3D-printed designs, there is a growing need for software that can handle free-form designs and have predictive capabilities for soft material deformation.

\textbf{B: Modeling and control of soft robots.} With the aim of achieving comparable performance to rigid robots and eventually biological creatures, there is a strong demand for advanced closed-loop control in soft robotic systems. However, the challenges in soft actuation and sensing extend directly to several modeling and control paradigms for soft robots \cite{Armanini2023,DellaSantina2021}: $(i)$ their high dexterity and adaptability are challenging to incorporate into a modeling framework, and $(ii)$ due to their continuum elastic bodies composed of a finite number of actuators and sensors, soft robots are inherently under-actuated and under-sensed, a problem common to infinite-dimensional systems (\eg, continuum systems). In regard to the closed-loop control of soft robots, the field has introduced two distinct branches that can competently address the relevant issues.

Model-based control uses first-principle mathematical models of the system being controlled to design and implement controllers. The derived models often have conventional structures, \eg, Lagrangian or Port-Hamiltonian, that is (closely) analogous to classic rigid robotics \cite{Spong2006,Murray1994,Armanini2023,DellaSantina2021}. As such, they extend (with minor modification) to existing control strategies including model-based feedback control \cite{Falkenhahn2015,Milana2021}, impedance control \cite{DellaSantina2020}, adaptive control \cite{Trumic2020,Kazemipour2022May}, iterative learning control \cite{Hofer2019}, and energy-shaping control \cite{Franco2020,Franco2022,Chang2023,Borja2022Apr}. Also, model-based approaches provide physical interpretations of the control gains, making controllers more transparent in terms of stability guarantees. Nonetheless, for some scenarios, first-principle modeling approaches (\ie, Euler-Lagrange methods) will not suffice. For example, during environment or self-contact, it can be challenging to select a finite-dimensional state representation of the soft robotic model that balances precision and computational efficiency. Also, \textit{a-priori} unknown system uncertainties, such as unreliability of sensors and actuators, model mismatches, and time-varying parameters, can impede the approach altogether.

\par Data-driven modeling focuses on utilizing existing data to establish the connection between inputs and outputs, instead of depending on prior knowledge or assumptions to formulate a theoretical model. The training data can be derived from measurements or high-fidelity surrogate models, which empowers the model to adapt as new information becomes available, similar to adaptive control. Despite often being black-box or grey-box approximators, these methods can tailor low-dimensional models which makes highly efficient as simulators. As an alternative, synthetic data generated from digital environments can be used to train learning controllers, \eg, in Reinforcement Learning (RL) \cite{Schegg2022,Tekinalp2022}. Model-Predictive Control (MPC) can also be applied within a data-driven framework \cite{Hyatt2020,Bruder2019}. However, in both cases, it is crucial that the training data be comprehensive enough to encompass the entire dynamic workspace. This requirement limits the generalizability of the method to unseen scenarios and necessitates retraining for specific control objectives. Additionally, control policies learned through virtual environments may not be effective in the physical system due to differences with reality, known as the Simulation-to-Reality (Sim2Real) barrier \cite{Kriegman2020}.

\subsection{Contribution of Sorotoki software}
To address some of these challenges, we introduce \texttt{Sorotoki} (short for Soft Robotics Toolkit), an open MATLAB\textsuperscript{\scriptsize\textregistered} toolkit for soft robotics that offers a range of tools for design, modeling, and control. \texttt{Sorotoki} aims to reduce barriers to entry in the field of soft robotics by providing a comprehensive software package that integrates various layers of modeling and control approaches, including continuum mechanics, dynamic systems and control theory, topology optimization, computer graphics, real-time control, and vision-based sensing. These diverse capabilities provide a highly flexible programming environment that can facilitate the development of innovative soft robotics research. The main feature of the \texttt{Sorotoki} are listed below:
%
\begin{enumerate}
    \setlength\itemsep{-0.1em}
    \item \textbf{Design and fabrication} -- Implicit modeling using Signed Distance Functions (SDFs), mesh generation, computational design, STL generation for 3D printing;
    \item \textbf{Modeling and control} -- Finite Element Models (FEM), high-efficiency reduced-order soft beam models (Lagrangian or port-Hamiltonian), programmable interconnections of a network of dynamic systems, e.g., soft robots, pressure reservoirs, and inertial rigid bodies.
    \item \textbf{Actuation and sensing} -- Real-time, high-precision, fluidic control platform using Raspberry Pi, vision-based sensing using RGB-depth camera;
    \item \textbf{Visualization} -- Fast and responsive 3D graphics rendering, mesh deformation modifiers, FK/IK-rigging.
    \item \textbf{Accessibility} -- A minimal programming syntax, characterized by the ability to express complex problems with a minimal number of lines of code.
    \item \textbf{Open hardware} -- Four 3D-printable soft robots (\eg, soft hand, soft manipulator).
\end{enumerate}
%

%\subsection{Organization}
We briefly detail the organization of the paper. Section \ref{sec:C5:related_works} reviews existing open-source soft robot software packages. Section \ref{sec:C5:open_softrobots} then assists the reader in getting started with the toolkit and introduces the open-source soft robotic systems. In Section \ref{sec:C5:software}, we detail the software architecture, the theory underlying the \textit{Sorotoki} functions, and how the theory can be applied through coding examples in \textit{Sorotoki}. Once the reader is familiar with the basic software architecture, Section \ref{sec:C5:studycases} presents advanced study cases based on seminal works in soft robotics research. The paper concludes in Section \ref{sec:C5:conclusion} with a summary and outlook for future work.
